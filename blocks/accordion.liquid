{%- if block.settings.title != blank and block.settings.content != blank or block.settings.page.content != blank -%}
  {%- capture accordion_content -%}
    <div class="prose">
      {{ block.settings.page.content | default: block.settings.content }}
      {%- content_for 'blocks' -%}
    </div>
  {%- endcapture -%}

  {%- render 'accordion', title: block.settings.title, content: accordion_content, block: block, open: block.settings.open_default, uppercase: true, new_arrow: true -%}
{%- endif -%}

{% schema %}
{
  "name": "Accordion",
  "tag": null,
  "settings": [
    {
      "type": "checkbox",
      "id": "open_default",
      "label": "Open by default"
    },
    {
      "type": "text",
      "id": "title",
      "label": "Title",
      "default": "Title"
    },
    {
      "type": "richtext",
      "id": "content",
      "label": "Content",
      "default": "<p>Write content about your brand or products.</p>"
    },
    {
      "type": "page",
      "id": "page",
      "label": "Page",
      "info": "Replaces content if specified."
    }
  ],
  "blocks": [{ "type": "@theme" }, { "type": "@app" }],
  "presets": [
    {
      "name": "Accordion"
    }
  ]
}
{% endschema %}
